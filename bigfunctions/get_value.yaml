type: function_sql
category: transform_json
author:
  name: Thomas LÃ©pine
  url: https://www.linkedin.com/company/esmoz/
  avatar_url: "https://media-exp1.licdn.com/dms/image/C560BAQHFcSF8X1MqrQ/company-logo_200_200/0/1636992707472?e=1678320000&v=beta&t=BJmNI_Nd0GuC9Mn3wKc1xGUEpZsCy-CsrTZh47cPcOQ"
description: |
  Returns the value associated with a key in an array of key_value pair
arguments:
  - name: key_value_items
    type: any type
  - name: item_key
    type: string
output:
  name: value
  type: any type
examples:
  - description: ""
    arguments:
      - "[struct('a' as key, 8 as value),struct('b' as key, 9 as value)]"
      - "a"
    output: "8"
    region: ALL 
  - description: ""
    arguments:
      - "[struct('a' as key, 8 as value),struct('b' as key, 9 as value)]"
      - "c"
    output: "null"
    region: ALL
  - description: "When a duplicate exists on a key, returns the first value"
    arguments:
      - "[struct('a' as key, 8 as value),struct('b' as key, 9 as value), struct('b' as key, 10 as value)]"
      - "b"
    output: "9"
    region: ALL
code: (select value from unnest(key_value_items) obj where obj.key = item_key limit 1)